var gallery={};
gallery.config={},gallery.config.maxHeight=0;
var flickr={restURL:"https://api.flickr.com/services/rest?",gelleryId:"72157712544669811",extras:"url_sq, url_q, url_t, url_s, url_m, url_l, url_o",api_key:"3c8245a213bd6a9ff6f9ad25087b9cad",flickrPhotoUrl:"url_s",flickrPhotoWidth:"width_t",flicrkPhotoHeight:"height_t"};
gallery.cmd={},gallery.cmd.getTextContent=function(e){var t="innerText"in e?"innerText":"textContent";return t},gallery.cmd._xhr_handler=function(e,t){try{return new XMLHttpRequest}catch(l){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(l){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(l){}return alert("XMLHttpRequest not supported"),null},gallery.cmd.getQueryParameters=function(e){var t="",l=window.location.href;if(l.indexOf("?")>-1)for(var i=l.substr(l.indexOf("?")).toLowerCase(),r=i.split("&"),n=0;n<r.length;n++)if(r[n].indexOf(e.toLowerCase()+"=")>-1){var o=r[n].split("=");t=o[1];break}return unescape(t)},gallery.cmd.showSplashMessage=function(e,t){var l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=document.createElement("div"),n=300,o=150;r.id="generalSplashID",r.style.width=n+"px",r.style.height=o+"px",r.style.left=l/2-n/2+"px",r.style.top=i/2-o/2+"px",r.style.background="rgba(0,0,0,0.8)",r.style.zIndex="4000",r.style.position="fixed",r.style.border="5px solid white",r.style.borderRadius="15px";var c=document.createElement("div");c.id="closeSpan_div_id",c.style.position="relative";var d=document.createElement("span");d.style.color="white",d[gallery.cmd.getTextContent(d)]=" X ",d.style.position="relative",d.style.borderRadius="20px",d.style.background="rgba(0,0,0,1)",d.style.fontSize="25px",d.style.top="10px",d.style.left=n/2-10+"px",d.onclick=function(){var e=document.getElementById("generalSplashID");e&&document.body.removeChild(e)},c.appendChild(d),r.appendChild(c);var h=document.createElement("div");h.style.marginTop="20px",h.style.marginLeft="10px",h.style.color="white",h.style.textAlign="center",h[gallery.cmd.getTextContent(h)]=e,r.appendChild(h),document.body.appendChild(r),window.setTimeout(function(){var e=document.getElementById("generalSplashID");e&&document.body.removeChild(e)},t)},gallery.cmd.getImageRequestGallery=function(){var e=gallery.cmd.getQueryParameters("galleryid");e.length>0&&(flickr.gelleryId=e)},gallery.cmd.getImageRequestSize=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e>767?(flickr.flickrPhotoUrl="url_l",flickr.flickrPhotoWidth="width_l",flickr.flicrkPhotoHeight="height_l"):e>374?(flickr.flickrPhotoUrl="url_m",flickr.flickrPhotoWidth="width_m",flickr.flicrkPhotoHeight="height_m"):(flickr.flickrPhotoUrl="url_s",flickr.flickrPhotoWidth="width_s",flickr.flicrkPhotoHeight="height_s");var t=gallery.cmd.getQueryParameters("size");t.length>0&&("l"==t?(flickr.flickrPhotoUrl="url_l",flickr.flickrPhotoWidth="width_l",flickr.flicrkPhotoHeight="height_l"):"m"==t?(flickr.flickrPhotoUrl="url_m",flickr.flickrPhotoWidth="width_m",flickr.flicrkPhotoHeight="height_m"):(flickr.flickrPhotoUrl="url_s",flickr.flickrPhotoWidth="width_s",flickr.flicrkPhotoHeight="height_s"))};
gallery.app=function(){gallery.cmd.getImageRequestGallery(),gallery.cmd.getImageRequestSize(),gallery.app.photo.getAndStorePhotoMetadata(),gallery.app.photo.loadPhotoBySize()},window.onorientationchange=function(){document.getElementById("photoContainer").removeChild(gallery.section),gallery.app.photo.drawPhoto(),gallery.app.photo.toggleButtons()},window.onresize=function(){document.getElementById("photoContainer").removeChild(gallery.section),gallery.app.photo.drawPhoto(),gallery.app.photo.toggleButtons()};
gallery.app.photo={},gallery.app.photo.photosMetadata=[];
gallery.app.photo.showSinglePhoto=function(){var e=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,document.createElement("div"));e.id="largeImagePanel";var t=document.createElement("div");t.id="closeSpanDivId";var n=document.createElement("span");n.id="closeSpan_Id",n[gallery.cmd.getTextContent(n)]=" X ",n.onclick=function(){var e=document.getElementById("largeImagePanel");e&&document.body.removeChild(e)},t.appendChild(n),e.appendChild(t);var d=document.createElement("div");d.id="largeImg",this.getAttribute("largeFlickrImage")?this.getAttribute("largeFlickrImage").length>0&&(d.style.backgroundImage="url("+this.getAttribute("largeFlickrImage")+")"):d.style.backgroundImage="url("+this.src+")",d.style.objectFit="cover!important",e.appendChild(d),document.body.appendChild(e)};
gallery.app.photo.drawPhoto=function(){gallery.currentWidth=function(){this._rootElem=document.getElementById("photoContainer");var e=this._rootElem.getBoundingClientRect();return currentWidth=e.right-e.left}(),gallery.currentHeight=function(){this._rootElem=document.getElementById("photoContainer");var e=this._rootElem.getBoundingClientRect(),i=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-e.top;return i}(),gallery.section=document.createElement("section"),gallery.section.className="sectionClass",gallery.sectionRow=document.createElement("div"),gallery.sectionRow.className="sectionRowClass";var maxWidth=gallery.currentWidth,maxHeight=gallery.currentHeight;gallery.config.maxWidth=maxWidth,gallery.config.maxHeight=maxHeight,gallery.calculateImageDivWidthAndHeight=function(e,i){var l=0,t=0;if(e>i)if(e>gallery.config.maxWidth&&i>gallery.config.maxHeight){if(l=.95*gallery.config.maxWidth,t=i*(.95*gallery.config.maxWidth/e),t>gallery.config.maxHeight){var a=l,g=t;t=.95*gallery.config.maxHeight,l=a*(.95*gallery.config.maxHeight/g)}}else e>gallery.config.maxWidth?(l=gallery.config.maxWidth,t=i*(gallery.config.maxWidth/e)):i>gallery.config.maxHeight?(t=.95*gallery.config.maxHeight,l=e*(.95*gallery.config.maxHeight/i)):(l=e,t=i);else if(e<i)if(e>gallery.config.maxWidth&&i>gallery.config.maxHeight){if(t=.95*gallery.config.maxHeight,l=e*(.95*gallery.config.maxHeight/i),l>gallery.config.maxWidth){var a=l,g=t;l=gallery.config.maxWidth,t=g*(gallery.config.maxWidth/a)}}else e>gallery.config.maxWidth?(l=gallery.config.maxWidth,t=i*(gallery.config.maxWidth/e)):i>gallery.config.maxHeight?(t=.95*gallery.config.maxHeight,l=e*(.95*gallery.config.maxHeight/i)):(l=e,t=i);else if(e>gallery.config.maxWidth&&i>gallery.config.maxHeight){if(l=.95*gallery.config.maxWidth,t=i*(.95*gallery.config.maxWidth/e),t>gallery.config.maxHeight){var a=l,g=t;t=.95*gallery.config.maxHeight,l=a*(.95*gallery.config.maxHeight/g)}}else e>gallery.config.maxWidth?(l=gallery.config.maxWidth,t=i*(gallery.config.maxWidth/e)):i>gallery.config.maxHeight?(t=.95*gallery.config.maxHeight,l=e*(.95*gallery.config.maxHeight/i)):(l=e,t=i);return{imageDiv_width:l,imageDiv_height:t}},gallery.app.photo.photosMetadata.reverse();for(var j=0;j<gallery.app.photo.photosMetadata.length;j++)for(var photos=gallery.app.photo.photosMetadata[j].photos.photo,i=0;i<photos.length;i++){gallery.imageDivElem=document.createElement("div");var photoWidth=photos[i][flickr.flickrPhotoWidth],photoHeight=photos[i][flickr.flicrkPhotoHeight],imageDivWidthAndHeight=gallery.calculateImageDivWidthAndHeight(photoWidth,photoHeight);gallery.imageDivElem.style.width=imageDivWidthAndHeight.imageDiv_width+"px",gallery.imageDivElem.style.height=imageDivWidthAndHeight.imageDiv_height+"px",eval(gallery.imageDivElem.style.width.split("px")[0])<=.5*maxWidth?gallery.imageDivElem.style.display="inline-block":gallery.imageDivElem.style.display="block",gallery.imageDivElem.style.top=maxHeight/2-gallery.imageDivElem.style.height/2+"px",gallery.imageDivElem.className="photo",gallery.imageDivElem.style.backgroundImage="url("+photos[i][flickr.flickrPhotoUrl]+")",photos[i].url_l&&gallery.imageDivElem.setAttribute("largeFlickrImage",photos[i].url_l),gallery.imageDivElem.onclick=gallery.app.photo.showSinglePhoto,gallery.imageDivElem.style.paddingTop="5px",gallery.imageDivElem.style.paddingBottom="5px",gallery.sectionRow.appendChild(gallery.imageDivElem)}gallery.section.appendChild(gallery.sectionRow),document.getElementById("photoContainer").appendChild(gallery.section)};
gallery.app.photo.getAndStorePhotoMetadata=function(){var e=window.location.href;"undefined"==typeof localStorage.getItem("previous_url")||null==localStorage.getItem("previous_url")?(localStorage.setItem("previous_url",e),gallery.app.photo.getPhotoMetadata()):e==localStorage.getItem("previous_url")?(gallery.app.photo.photosMetadata=JSON.parse(localStorage.getItem("photosMetadata")),gallery.app.photo.drawPhoto()):(localStorage.setItem("previous_url",e),gallery.app.photo.getPhotoMetadata())},gallery.app.photo.getPhotoMetadata=function(){var e=flickr.gelleryId.split(",");gallery.currentGalleryIdIndex=0;for(var t=0;t<e.length;t++){var a=flickr.restURL+"&method=flickr.galleries.getPhotos&api_key="+flickr.api_key+"&gallery_id="+e[t]+"&extras="+flickr.extras+"&format=json&nojsoncallback=1&get_gallery_info=1",o=new gallery.cmd._xhr_handler;o.onreadystatechange=gallery.app.photo.sortPhotos,o.open("GET",a,!0),o.onerror=gallery.app.photo.onPhotoRequestError,o.send(null)}},gallery.app.photo.onPhotoRequestError=function(e){4==this.readyState&&(0==this.status?gallery.cmd.showSplashMessage("No internet connection1",6e4):this.status>=200&&this.status<304?gallery.cmd.showSplashMessage("No internet connection2",6e4):this.status>=400&&this.status<500?gallery.cmd.showSplashMessage("Client problem1",6e4):this.status>=500&&this.status<599&&gallery.cmd.showSplashMessage("Client problem2",6e4))};
gallery.app.photo.sortPhotos=function(){if(4==this.readyState&&200==this.status){gallery.currentGalleryIdIndex=gallery.currentGalleryIdIndex+1;var t=JSON.parse(this.responseText);if("ok"==t.stat){for(var e=[],l=t.photos.photo,o=0,r=0;l.length>0;)for(var a=0;a<l.length;a++)l[a][flickr.flickrPhotoWidth]/l[a][flickr.flicrkPhotoHeight]>o?(o=l[a][flickr.flickrPhotoWidth]/l[a][flickr.flicrkPhotoHeight],r=a):(o=o,r=r),a===l.length-1&&(e.push(l[r]),l.splice(r,1),o=0,r=0);t.photos.photo=e,gallery.app.photo.photosMetadata.push(t),gallery.currentGalleryIdIndex==flickr.gelleryId.split(",").length&&(gallery.app.photo.drawPhoto(),localStorage.setItem("photosMetadata",JSON.stringify(gallery.app.photo.photosMetadata)))}else gallery.cmd.showSplashMessage(t.message,6e4)}};
gallery.app.photo.loadPhotoBySize=function(){gallery.app.photo.loadPhotoBySizeButton=function(){"largePhoto"==this.id?(flickr.flickrPhotoUrl="url_l",flickr.flickrPhotoWidth="width_l",flickr.flicrkPhotoHeight="height_l"):"mediumPhoto"==this.id?(flickr.flickrPhotoUrl="url_m",flickr.flickrPhotoWidth="width_m",flickr.flicrkPhotoHeight="height_m"):(flickr.flickrPhotoUrl="url_s",flickr.flickrPhotoWidth="width_s",flickr.flicrkPhotoHeight="height_s"),document.getElementById("photoContainer").removeChild(gallery.section),gallery.app.photo.drawPhoto()},document.getElementById("smallPhoto").onclick=gallery.app.photo.loadPhotoBySizeButton,document.getElementById("mediumPhoto").onclick=gallery.app.photo.loadPhotoBySizeButton,document.getElementById("largePhoto").onclick=gallery.app.photo.loadPhotoBySizeButton,gallery.app.photo.toggleButtons()},gallery.app.photo.toggleButtons=function(){var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;o>414?(document.getElementById("smallPhoto").style.display="inline-block",document.getElementById("mediumPhoto").style.display="inline-block",document.getElementById("largePhoto").style.display="inline-block"):(document.getElementById("smallPhoto").style.display="none",document.getElementById("mediumPhoto").style.display="none",document.getElementById("largePhoto").style.display="none")};